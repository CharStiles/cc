<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.1/p5.js"></script>

    <link rel="stylesheet" type="text/css" href="style.css">
    <meta charset="utf-8" />

  </head>
  <body>
    <main>
    </main>
    <script>
    
    
let video;

let program, shadertime;

function setup() {
  noCursor();
  createCanvas(400, 400, WEBGL);
    program = createShader(vert, frag);
  shaderTime =0.;
 // fullscreen(true);
}


function draw() {
  noCursor();
  var right = []
  var left = []
  background(255,255)
    translate(-width/2.,-height/2.)
    shader(program);
  shaderTime+= 0.005;
     program.setUniform('mx', mouseX);
   program.setUniform('my',mouseY);
  
   program.setUniform('u_resolution', [width, height]);

    program.setUniform('u_time', shaderTime);
    program.setUniform('min', float((minute()/1.5) + 10 ));
    program.setUniform('hour', float(hour() ));
  program.setUniform("uTexture", cursor);

   // rect gives us some geometry on the screen
   rect(0,0,width, height);
  
  shaderTime++;

}

function mouseClicked(){
  isClicked = !isClicked;
  shaderTime =0;
}

var vert = `
#ifdef GL_ES
      precision highp float;
      precision highp int;
    #endif

    // attributes, in
    attribute vec3 aPosition;
    attribute vec3 aNormal;
    attribute vec2 aTexCoord;
    attribute vec4 aVertexColor;

    // attributes, out
    varying vec3 var_vertPos;
    varying vec4 var_vertCol;
    varying vec3 var_vertNormal;
    varying vec2 var_vertTexCoord;

    // matrices
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;
    //uniform mat3 uNormalMatrix;

    void main() {
      gl_Position = uProjectionMatrix * uModelViewMatrix * vec4(aPosition, 1.0);

      // just passing things through
      // var_vertPos      = aPosition;
      // var_vertCol      = aVertexColor;
      // var_vertNormal   = aNormal;
      // var_vertTexCoord = aTexCoord;
    }
`;
//YOUR CODE GOES HERE IN BETWEEN THE tick MARKS
var frag = `


#ifdef GL_ES
precision mediump float;
#endif

uniform vec2 u_resolution;
uniform float u_time; // millis()

// http://www.iquilezles.org/www/articles/palettes/palettes.htm 
// to see this function graphed out go to: https://www.desmos.com/calculator/rz7abjujdj
vec3 cosPalette( float t , vec3 brightness, vec3 contrast, vec3 osc, vec3 phase)
{

    return brightness + contrast*cos( 6.28318*(osc*t+phase) );
}



float sdCircle( vec2 p, float r )
{
  return length(p) - r;
}


void main() {

    vec2 pos = ((gl_FragCoord.xy/u_resolution) - 0.5)*2.0; // origin is in center
    // who remembers SOH CAH TOA ?
    // tan, given an angle will return the ratio
    // so if we only have the ratio of position
    // we use atan to get the angle
  
    float angle = atan(pos.y, pos.x);
  	float r = sin(angle + u_time/10.);
  
  	float g = sin(length(pos * 10.)-u_time);
  
  	float b = sin(sin(angle * 10.) + length(pos * 10. + u_time) );


  
  
  
    vec4 color = vec4(r,g,b,1);
    
  	vec3 brightness= vec3(0.92,0.902,0.91) - 0.2;
  vec3 contrast = vec3 (.1,.1,.1);
  vec3 osc = vec3(0.2,0.205,0.201);
  vec3 phase =vec3(0.23,0.22,0.21);
  
  vec3 cosColor = cosPalette(r+b, brightness, contrast, osc,phase) - sdCircle(pos,0.2);
  
  
  
    gl_FragColor = vec4(cosColor,1.);
}`;


    </script>
  </body>
</html>
